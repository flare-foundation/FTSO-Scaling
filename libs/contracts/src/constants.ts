import {NetworkContractAddresses} from "./definitions";

export const COSTON_CONTRACTS: NetworkContractAddresses = {
    FlareSystemsManager: {name: "FlareSystemsManager", address: "0x85680Dd93755Fe5d0789773fd0896cEE51F9e358"},
    FtsoRewardOffersManager: {name: "FtsoRewardOffersManager", address: "0xC9534cB913150aD3e98D792857689B55e2404212"},
    RewardManager: {name: "RewardManager", address: "0x2ade9972E7f27200872D378acF7a1BaD8D696FC5"},
    Submission: {name: "Submission", address: "0x2cA6571Daa15ce734Bbd0Bf27D5C9D16787fc33f"},
    Relay: {name: "Relay", address: "0x92a6E1127262106611e1e129BB64B6D8654273F7"},
    FlareSystemsCalculator: {name: "FlareSystemsCalculator", address: "0x43CBAB9C953F54533aadAf7ffCD13c30ec05Edc9"},
    VoterRegistry: {name: "VoterRegistry", address: "0xE2c06DF29d175Aa0EcfcD10134eB96f8C94448A3"},
    FtsoMerkleStructs: {name: "FtsoMerkleStructs", address: ""},
    ProtocolMerkleStructs: {name: "ProtocolMerkleStructs", address: ""},
    FastUpdater: {name: "FastUpdater", address: "0xB8336A96b4b8af89f60EA080002214191Bc8293A"},
    FastUpdateIncentiveManager: {
        name: "FastUpdateIncentiveManager",
        address: "0x8c45666369B174806E1AB78D989ddd79a3267F3b",
    },
    FdcHub: {name: "FdcHub", address: "0x1c78A073E3BD2aCa4cc327d55FB0cD4f0549B55b"},
};

export const COSTON2_CONTRACTS: NetworkContractAddresses = {
    FlareSystemsManager: {name: "FlareSystemsManager", address: "0xA90Db6D10F856799b10ef2A77EBCbF460aC71e52"},
    FtsoRewardOffersManager: {name: "FtsoRewardOffersManager", address: "0x1b7ffab226b66b5eCBdC79a42287BC09C05bCb33"},
    RewardManager: {name: "RewardManager", address: "0xB4f43E342c5c77e6fe060c0481Fe313Ff2503454"},
    Submission: {name: "Submission", address: "0x2cA6571Daa15ce734Bbd0Bf27D5C9D16787fc33f"},
    Relay: {name: "Relay", address: "0x97702e350CaEda540935d92aAf213307e9069784"},
    FlareSystemsCalculator: {name: "FlareSystemsCalculator", address: "0x9aF60c16192330EC98d04Ec9675d22dBb9892951"},
    VoterRegistry: {name: "VoterRegistry", address: "0xc6E40401395DCc648bC4bBb38fE4552423cD9BAC"},
    FtsoMerkleStructs: {name: "FtsoMerkleStructs", address: ""},
    ProtocolMerkleStructs: {name: "ProtocolMerkleStructs", address: ""},
    FastUpdater: {name: "FastUpdater", address: "0x0B162CA3acf3482d3357972e12d794434085D839"},
    FastUpdateIncentiveManager: {
        name: "FastUpdateIncentiveManager",
        address: "0xC71C1C6E6FB31eF6D948B2C074fA0d38a07D4f68",
    },
    FdcHub: {name: "FdcHub", address: ""},
};

export const SONGBIRD_CONTRACTS: NetworkContractAddresses = {
    FlareSystemsManager: {name: "FlareSystemsManager", address: "0x421c69E22f48e14Fc2d2Ee3812c59bfb81c38516"},
    FtsoRewardOffersManager: {name: "FtsoRewardOffersManager", address: "0x5aB9cB258a342001C4663D9526A1c54cCcF8C545"},
    RewardManager: {name: "RewardManager", address: "0xE26AD68b17224951b5740F33926Cc438764eB9a7"},
    Submission: {name: "Submission", address: "0x2cA6571Daa15ce734Bbd0Bf27D5C9D16787fc33f"},
    Relay: {name: "Relay", address: "0x67a916E175a2aF01369294739AA60dDdE1Fad189"},
    FlareSystemsCalculator: {name: "FlareSystemsCalculator", address: "0x126FAeEc75601dA3354c0b5Cc0b60C85fCbC3A5e"},
    VoterRegistry: {name: "VoterRegistry", address: "0x31B9EC65C731c7D973a33Ef3FC83B653f540dC8D"},
    FtsoMerkleStructs: {name: "FtsoMerkleStructs", address: ""},
    ProtocolMerkleStructs: {name: "ProtocolMerkleStructs", address: ""},
    FastUpdater: {name: "FastUpdater", address: "0x7D9F73FD9bC4607daCB618FF895585f98BFDD06B"},
    FastUpdateIncentiveManager: {
        name: "FastUpdateIncentiveManager",
        address: "0x596C70Ad6fFFdb9b6158F1Dfd0bc32cc72B82006",
    },
    FdcHub: {name: "FdcHub", address: "0xCfD4669a505A70c2cE85db8A1c1d14BcDE5a1a06"},
};

export const FLARE_CONTRACTS: NetworkContractAddresses = {
    FlareSystemsManager: {name: "FlareSystemsManager", address: "0x89e50DC0380e597ecE79c8494bAAFD84537AD0D4"},
    FtsoRewardOffersManager: {name: "FtsoRewardOffersManager", address: "0x244EA7f173895968128D5847Df2C75B1460ac685"},
    RewardManager: {name: "RewardManager", address: "0xC8f55c5aA2C752eE285Bd872855C749f4ee6239B"},
    Submission: {name: "Submission", address: "0x2cA6571Daa15ce734Bbd0Bf27D5C9D16787fc33f"},
    Relay: {name: "Relay", address: "0x57a4c3676d08Aa5d15410b5A6A80fBcEF72f3F45"},
    FlareSystemsCalculator: {name: "FlareSystemsCalculator", address: "0x67c4B11c710D35a279A41cff5eb089Fe72748CF8"},
    VoterRegistry: {name: "VoterRegistry", address: "0x2580101692366e2f331e891180d9ffdF861Fce83"},
    FtsoMerkleStructs: {name: "FtsoMerkleStructs", address: ""},
    ProtocolMerkleStructs: {name: "ProtocolMerkleStructs", address: ""},
    FastUpdater: {name: "FastUpdater", address: "0xdBF71d7840934EB82FA10173103D4e9fd4054dd1"},
    FastUpdateIncentiveManager: {
        name: "FastUpdateIncentiveManager",
        address: "0xd648e8ACA486Ce876D641A0F53ED1F2E9eF4885D",
    },
    FdcHub: {name: "FdcHub", address: "0xc25c749DC27Efb1864Cb3DADa8845B7687eB2d44"},
};

export type networks = "local-test" | "from-env" | "coston2" | "coston" | "songbird" | "flare";

const contracts = () => {
    const network = process.env.NETWORK as networks;
    switch (network) {
        case "local-test":
        case "coston2":
            return COSTON2_CONTRACTS;
        case "coston":
            return COSTON_CONTRACTS;
        case "songbird":
            return SONGBIRD_CONTRACTS;
        case "flare":
            return FLARE_CONTRACTS;
        case "from-env": {
            console.log(
                `Loading contract addresses from environment variables, as specified in .env NETWORK: ${process.env.NETWORK}`
            );
            if (
                !process.env.FTSO_CA_FTSO_SYSTEMS_MANAGER_ADDRESS ||
                !isValidContractAddress(process.env.FTSO_CA_FTSO_SYSTEMS_MANAGER_ADDRESS)
            )
                throw new Error("FTSO_CA_FTSO_SYSTEMS_MANAGER_ADDRESS value is not valid contract address");
            if (
                !process.env.FTSO_CA_FTSO_REWARD_OFFERS_MANAGER_ADDRESS ||
                !isValidContractAddress(process.env.FTSO_CA_FTSO_REWARD_OFFERS_MANAGER_ADDRESS)
            )
                throw new Error("FTSO_CA_FTSO_REWARD_OFFERS_MANAGER_ADDRESS value is not valid contract address");
            if (
                !process.env.FTSO_CA_REWARD_MANAGER_ADDRESS ||
                !isValidContractAddress(process.env.FTSO_CA_REWARD_MANAGER_ADDRESS)
            )
                throw new Error("FTSO_CA_REWARD_MANAGER_ADDRESS value is not valid contract address");
            if (!process.env.FTSO_CA_SUBMISSION_ADDRESS || !isValidContractAddress(process.env.FTSO_CA_SUBMISSION_ADDRESS))
                throw new Error("FTSO_CA_SUBMISSION_ADDRESS value is not valid contract address");
            if (!process.env.FTSO_CA_RELAY_ADDRESS || !isValidContractAddress(process.env.FTSO_CA_RELAY_ADDRESS))
                throw new Error("FTSO_CA_RELAY_ADDRESS value is not valid contract address");
            if (
                !process.env.FTSO_CA_FLARE_SYSTEMS_CALCULATOR_ADDRESS ||
                !isValidContractAddress(process.env.FTSO_CA_FLARE_SYSTEMS_CALCULATOR_ADDRESS)
            )
                throw new Error("FTSO_CA_FLARE_SYSTEMS_CALCULATOR_ADDRESS value is not valid contract address");
            if (
                !process.env.FTSO_CA_VOTER_REGISTRY_ADDRESS ||
                !isValidContractAddress(process.env.FTSO_CA_VOTER_REGISTRY_ADDRESS)
            )
                throw new Error("FTSO_CA_VOTER_REGISTRY_ADDRESS value is not valid contract address");
            if (
                !process.env.FTSO_CA_FAST_UPDATER_ADDRESS ||
                !isValidContractAddress(process.env.FTSO_CA_FAST_UPDATER_ADDRESS)
            )
                throw new Error("FTSO_CA_FAST_UPDATER_ADDRESS value is not valid contract address");
            if (
                !process.env.FTSO_CA_FAST_UPDATE_INCENTIVE_MANAGER_ADDRESS ||
                !isValidContractAddress(process.env.FTSO_CA_FAST_UPDATE_INCENTIVE_MANAGER_ADDRESS)
            )
                throw new Error("FTSO_CA_FAST_UPDATE_INCENTIVE_MANAGER_ADDRESS value is not valid contract address");
            if (
                !process.env.FTSO_CA_FDC_HUB_ADDRESS ||
                !isValidContractAddress(process.env.FTSO_CA_FDC_HUB_ADDRESS)
            )
                throw new Error("FTSO_CA_FDC_HUB_ADDRESS value is not valid contract address");

            const CONTRACT_CONFIG: NetworkContractAddresses = {
                FlareSystemsManager: {
                    name: "FlareSystemsManager",
                    address: process.env.FTSO_CA_FTSO_SYSTEMS_MANAGER_ADDRESS
                },
                FtsoRewardOffersManager: {
                    name: "FtsoRewardOffersManager",
                    address: process.env.FTSO_CA_FTSO_REWARD_OFFERS_MANAGER_ADDRESS,
                },
                RewardManager: {name: "RewardManager", address: process.env.FTSO_CA_REWARD_MANAGER_ADDRESS},
                Submission: {name: "Submission", address: process.env.FTSO_CA_SUBMISSION_ADDRESS},
                Relay: {name: "Relay", address: process.env.FTSO_CA_RELAY_ADDRESS},
                FlareSystemsCalculator: {
                    name: "FlareSystemsCalculator",
                    address: process.env.FTSO_CA_FLARE_SYSTEMS_CALCULATOR_ADDRESS,
                },
                VoterRegistry: {name: "VoterRegistry", address: process.env.FTSO_CA_VOTER_REGISTRY_ADDRESS},
                FtsoMerkleStructs: {name: "FtsoMerkleStructs", address: ""},
                ProtocolMerkleStructs: {name: "ProtocolMerkleStructs", address: ""},
                FastUpdater: {name: "FastUpdater", address: process.env.FTSO_CA_FAST_UPDATER_ADDRESS},
                FastUpdateIncentiveManager: {
                    name: "FastUpdateIncentiveManager",
                    address: process.env.FTSO_CA_FAST_UPDATE_INCENTIVE_MANAGER_ADDRESS,
                },
                FdcHub: {name: "FdcHub", address: process.env.FTSO_CA_FDC_HUB_ADDRESS},
            };
            return CONTRACT_CONFIG;
        }
        default:
            // Ensure exhaustive checking
            // eslint-disable-next-line @typescript-eslint/no-empty-function, @typescript-eslint/no-unused-vars
            ((_: never): void => {
            })(network);
    }
};
export const CONTRACTS = contracts();


function isValidHexString(str: string): boolean {
    return /^0x[0-9a-f]*$/i.test(str);
}

function isValidContractAddress(address: string): boolean {
    return isValidHexString(address) && address.length === 42;
}
